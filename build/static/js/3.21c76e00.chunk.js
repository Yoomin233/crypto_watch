(this["webpackJsonpcrypto-watch"]=this["webpackJsonpcrypto-watch"]||[]).push([[3],{60:function(e,t,r){"use strict";r.r(t);var n,c=r(4),a=r(2),o=r(58),i=r(1),u=r(3),l=r(11),s=r(10),b=r.n(s),f=r(26),p={"1D":300,"7D":300,"1M":3600,"3M":3600,"1Y":86400},h=function(e,t){var r=Object(i.useState)([]),n=Object(c.a)(r,2),a=n[0],o=n[1],u=Object(i.useState)(!0),s=Object(c.a)(u,2),h=s[0],d=s[1],g=Object(i.useCallback)((function(){return d(!0),b.a.get("https://api.coinmarketcap.com/data-api/v3/cryptocurrency/detail/chart?id=".concat(e,"&range=").concat(t)).then((function(e){var t=e.data,r=Object.entries(t.data.points).map((function(e){var t=Object(c.a)(e,2),r=t[0],n=t[1];return{time:Number(r),value:n.v[0]}}));return o(r),r})).catch((function(e){return[]})).finally((function(){d(!1)}))}),[e,t]);return Object(i.useEffect)((function(){g();var r=f.a.subscribe("WS-".concat(e),(function(e){o((function(r){var n=r[r.length-1],c=1e3*n.time;return Number(new Date)-c>=p[t]?(console.log("insert new line!"),[].concat(Object(l.a)(r),[{time:Math.floor(Number(new Date)/1e3),value:e.p}])):(console.log("in-place update!"),n.price=e.p,Object(l.a)(r))}))}));return function(){console.log("unsubscribe!"),f.a.unsubscribe("WS-".concat(e),r)}}),[e,t,g]),[a,h]},d=r(0),g={chart:{layout:{backgroundColor:"transparent",lineColor:"#2B2B43",textColor:"#D9D9D9"},watermark:{color:"rgba(0, 0, 0, 0)"},crosshair:{color:"#758696"},grid:{vertLines:{color:"transparent"},horzLines:{color:"transparent"}}},series:{topColor:"rgba(32, 226, 47, 0.56)",bottomColor:"rgba(32, 226, 47, 0.04)",lineColor:"rgba(32, 226, 47, 1)"}},m=u.a.div(n||(n=Object(a.a)(["\n  height: 100%;\n  width: 100%;\n"])));t.default=function(e){var t=e.id,r=void 0===t?1:t,n=e.period,a=void 0===n?"1D":n,u=Object(i.useRef)(null),l=Object(i.useRef)(null),s=Object(i.useRef)(null),b=h(r,a),f=Object(c.a)(b,2),p=f[0];f[1];return Object(i.useEffect)((function(){if(u.current){if(l.current&&s.current)return s.current.setData(p),void l.current.timeScale().fitContent();var e=u.current.getBoundingClientRect(),t=e.width,r=e.height,n=Object(o.a)(u.current,{width:t,height:r,handleScale:{mouseWheel:!1,pinch:!1,axisPressedMouseMove:!1},rightPriceScale:{borderVisible:!1},timeScale:{borderVisible:!1,timeVisible:!0,fixLeftEdge:!0,fixRightEdge:!0,tickMarkFormatter:function(e,t,r){return new Date(1e3*Number(e)).toLocaleDateString()}},localization:{timeFormatter:function(e){return new Date(1e3*Number(e)).toLocaleString()}}});l.current=n,s.current=n.addAreaSeries({topColor:"rgba(33, 150, 243, 0.56)",bottomColor:"rgba(33, 150, 243, 0.04)",lineColor:"rgba(33, 150, 243, 1)",lineWidth:1}),n.applyOptions(g.chart),s.current.applyOptions(g.series),n.timeScale().fitContent(),s.current.setData(p),console.log("mount!!")}}),[r,p]),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(m,{ref:u})})}}}]);
//# sourceMappingURL=3.21c76e00.chunk.js.map