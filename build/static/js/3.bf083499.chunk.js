(this["webpackJsonpcrypto-watch"]=this["webpackJsonpcrypto-watch"]||[]).push([[3],{60:function(t,e,r){"use strict";r.r(e);var n,a=r(11),c=r(4),o=r(2),i=r(10),u=r.n(i),l=r(59),s=r(1),b=r(3),h=r(27),f=r(18),p=r(0),d={chart:{layout:{backgroundColor:"transparent",lineColor:"#2B2B43",textColor:"#D9D9D9"},watermark:{color:"rgba(0, 0, 0, 0)"},crosshair:{color:"#758696"},grid:{vertLines:{color:"transparent"},horzLines:{color:"transparent"}}},series:{topColor:"rgba(32, 226, 47, 0.56)",bottomColor:"rgba(32, 226, 47, 0.04)",lineColor:"rgba(32, 226, 47, 1)"}},g=b.a.div(n||(n=Object(o.a)(["\n  height: 100%;\n  width: 100%;\n"])));e.default=function(t){var e=t.id,r=void 0===e?1:e,n=t.period,o=void 0===n?7:n,i=Object(s.useRef)(null),b=Object(s.useRef)(null),m=Object(s.useRef)(null),j=Object(s.useState)([]),O=Object(c.a)(j,2),v=O[0],C=O[1],w=Object(s.useState)(!0),S=Object(c.a)(w,2),D=S[0],k=S[1],y=Object(s.useCallback)((function(){return u.a.get("https://api.coinmarketcap.com/data-api/v3/cryptocurrency/detail/chart?id=".concat(r,"&range=").concat(o)).then((function(t){var e=t.data,r=Object.entries(e.data.points).map((function(t){var e=Object(c.a)(t,2),r=e[0],n=e[1];return{time:Number(r),value:n.v[0]}}));return C(r),r})).catch((function(t){return[]}))}),[r,o]);return Object(s.useEffect)((function(){if(i.current){b.current&&b.current.remove(),k(!0);var t,e=i.current.getBoundingClientRect(),n=e.width,c=e.height;return y().then((function(e){if(i.current){var o=Object(l.a)(i.current,{width:n,height:c,handleScale:{mouseWheel:!1,pinch:!1,axisPressedMouseMove:!1},rightPriceScale:{borderVisible:!1},timeScale:{borderVisible:!1,timeVisible:!0,fixLeftEdge:!0,fixRightEdge:!0,tickMarkFormatter:function(t,e,r){return new Date(1e3*Number(t)).toLocaleDateString()}},localization:{timeFormatter:function(t){return new Date(1e3*Number(t)).toLocaleString()}}});b.current=o,m.current=o.addAreaSeries({topColor:"rgba(33, 150, 243, 0.56)",bottomColor:"rgba(33, 150, 243, 0.04)",lineColor:"rgba(33, 150, 243, 1)",lineWidth:1}),o.applyOptions(d.chart),m.current.applyOptions(d.series),k(!1),o.timeScale().fitContent(),m.current.setData(e),t=h.a.subscribe("WS-".concat(r),(function(t){C((function(e){return[].concat(Object(a.a)(e),[{time:Math.floor(Number(new Date)/1e3),value:t.p}])}))}))}})),function(){return h.a.unsubscribe("WS-".concat(r),t)}}}),[y]),Object(s.useEffect)((function(){m.current&&v.length&&m.current.setData(v)}),[v]),Object(p.jsx)(g,{ref:i,children:D?Object(p.jsx)(f.a,{}):null})}}}]);
//# sourceMappingURL=3.bf083499.chunk.js.map