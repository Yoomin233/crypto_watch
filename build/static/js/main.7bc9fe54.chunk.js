(this["webpackJsonpcrypto-watch"]=this["webpackJsonpcrypto-watch"]||[]).push([[0],{11:function(e,n,t){"use strict";var c,a,o=t(2),r=t(3),s=t(1);const i=Object(r.b)(c||(c=Object(o.a)(["\n    to {\n        transform: rotate(1turn);\n    }\n"]))),l=r.a.span(a||(a=Object(o.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-grow: 1;\n  > span {\n    border: 3px solid var(--border-color);\n    border-radius: 50%;\n    border-top-color: var(--text-color);\n    width: 1em;\n    height: 1em;\n    animation: "," 1s linear 0s infinite;\n  }\n"])),i);n.a=()=>Object(s.jsx)(l,{children:Object(s.jsx)("span",{})})},33:function(e,n,t){},53:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t.n(c),o=t(12),r=t.n(o),s=(t(33),t(2)),i=t(3),l=t(5),d=t(11),u=t(1);const p=a.a.createContext({period:"1D",setPeriod:()=>{}}),b=({children:e})=>{const[n,t]=Object(c.useState)("1D");return Object(u.jsx)(p.Provider,{value:{period:n,setPeriod:t},children:e})},j=e=>String(e).replace(/\.?0+$/,""),h=e=>j(e.toFixed((e=>{if(e>=1)return Math.max(1,4-Math.floor(Math.log10(e)));{let n=-2;for(;1-e>=0;)e*=10,n+=1;return Math.max(4,4+n)}})(e)));var m,x,g,f;const O=i.a.div(m||(m=Object(s.a)(["\n  position: relative;\n  overflow: hidden;\n  display: inline-block;\n  /* margin-top: 8px; */\n  vertical-align: top;\n  /* display: inline-block; */\n  /* border-left: 1px solid #fff; */\n  /* border-radius: 4px; */\n  cursor: pointer;\n  box-sizing: border-box;\n  user-select: none;\n  white-space: nowrap;\n\n  button {\n    /* font-size: 0.8em; */\n    /* height: 80%; */\n  }\n\n  .buttons {\n    display: grid;\n    grid-auto-flow: column;\n    gap: 4px;\n    margin-left: 8px;\n    /* position: absolute; */\n    right: 0;\n    top: 0;\n    height: 100%;\n    z-index: 10;\n    background-color: var(--background-color);\n    /* transform: translateX(calc(101%)); */\n    transition: all 0.3s ease;\n    /* &.edit {\n      transform: none;\n    } */\n    /* overflow: hidden; */\n    /* > button {\n    } */\n    /* background: red; */\n  }\n"]))),v=i.a.div(x||(x=Object(s.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  /* &:hover {\n    transform: translateY(-2px);\n  } */\n  @media screen and (max-width: 450px) {\n    > a:first-child {\n      max-width: 45vw;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n\n  > span.metrics {\n    display: flex;\n    align-items: center;\n  }\n\n  > a {\n    color: inherit;\n    font-size: 1.1rem;\n    text-decoration: none;\n    font-weight: bold;\n\n    > span {\n      display: inline-flex;\n      flex-direction: column;\n      vertical-align: middle;\n\n      > span:nth-child(2) {\n        font-size: 0.8rem;\n        opacity: 0.5;\n      }\n    }\n  }\n\n  img {\n    width: 2rem;\n    margin-right: 0.5em;\n    vertical-align: middle;\n  }\n\n  span.price {\n    font-weight: bold;\n    font-size: 1.1rem;\n    transition: all 0.1s linear;\n    display: inline-flex;\n    flex-direction: column;\n    align-items: flex-end;\n    vertical-align: bottom;\n\n    &.up {\n      color: var(--up-color);\n    }\n\n    &.down {\n      color: var(--down-color);\n    }\n\n    > span:nth-child(2) {\n      font-size: 0.8rem;\n      opacity: 0.5;\n    }\n  }\n\n  span.percentage {\n    padding: 4px 8px;\n    border-radius: 4px;\n    color: #fff;\n    margin-left: 12px;\n    display: inline-block;\n    text-align: center;\n    /* width: 4.5em; */\n  }\n"]))),w=i.a.div(g||(g=Object(s.a)(["\n  /* border-bottom: 1px solid var(--border-color); */\n  justify-content: space-between;\n  display: flex;\n  position: relative;\n  overflow: hidden;\n  height: 300px;\n"]))),y=i.a.div(f||(f=Object(s.a)(["\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n\n  .switch {\n    display: flex;\n    margin-right: 8px;\n\n    > span {\n      border: 1px solid transparent;\n      flex-grow: 1;\n      border-radius: 6px;\n      padding: 2px 4px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      &.selected {\n        /* color: yellow; */\n        border-color: #1fe230;\n      }\n    }\n  }\n\n  img {\n    width: 100%;\n  }\n"])));var S;const k=i.a.div(S||(S=Object(s.a)(["\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.8);\n  z-index: 10;\n  display: flex;\n\n  > div {\n    width: 80vw;\n    max-width: 500px;\n    padding: 24px;\n    margin: auto;\n    border-radius: 16px;\n    background: var(--gray-color);\n    @media screen and (max-width: 500px) {\n      width: 96vw;\n    }\n  }\n"])));var C=({children:e,show:n,onClose:t})=>n?Object(o.createPortal)(Object(u.jsx)(k,{onClick:t,children:Object(u.jsx)("div",{onClick:e=>{e.stopPropagation()},children:e})}),document.body):null;const N=Object(c.lazy)((()=>Promise.all([t.e(4),t.e(3)]).then(t.bind(null,55)))),L=Object(c.memo)((({id:e=1,crypto:n})=>{const{period:t,setPeriod:a}=Object(c.useContext)(p),[o,r]=Object(c.useState)(t);return Object(c.useEffect)((()=>{a(o)}),[a,o]),Object(u.jsxs)(y,{children:[Object(u.jsxs)("div",{style:{marginBottom:8,textAlign:"center",fontWeight:"bold"},children:[n," Chart"]}),Object(u.jsxs)("div",{className:"switch",children:[Object(u.jsx)("span",{className:"1D"===o?"selected":void 0,onClick:()=>r("1D"),children:"24h"}),Object(u.jsx)("span",{className:"7D"===o?"selected":void 0,onClick:()=>r("7D"),children:"7D"}),Object(u.jsx)("span",{className:"1M"===o?"selected":void 0,onClick:()=>r("1M"),children:"1M"}),Object(u.jsx)("span",{className:"1Y"===o?"selected":void 0,onClick:()=>r("1Y"),children:"1Y"}),Object(u.jsx)("span",{className:"ALL"===o?"selected":void 0,onClick:()=>r("ALL"),children:"ALL"})]}),Object(u.jsx)(D,{id:e,period:o})]})})),D=({id:e=1,period:n="1D"})=>Object(u.jsx)(c.Suspense,{fallback:Object(u.jsx)(d.a,{}),children:Object(u.jsx)(N,{id:e,period:n})});var E,M=Object(c.memo)((({name:e,info:n,onRemove:t,prices:a,setPrices:o,idx:r,expandStatus:s,setExpandStatus:i,edit:d})=>{const{id:p,p24h:b,price:m,slug:x,symbol:g,amount:f}=n,y=Object(c.useRef)(m),[S,k]=Object(c.useState)(0),[N,D]=Object(c.useState)(f);Object(c.useEffect)((()=>{m!==y.current&&void 0!==m&&void 0!==y.current&&(y.current<m?k(1):k(-1),setTimeout((()=>k(0)),1e3)),y.current=m}),[m]);const E=e=>{const n=e?-1:1,t=a[r+n];a[r+n]=a[r],a[r]=t,o([...a])},M=!!s[p],P=Object(c.useMemo)((()=>m?h(m):"-"),[m]),F=e=>{if(!e)return;const n=Number(e.target.value);D(n);const t=a.findIndex((e=>e.id===p));t>=0&&(a[t]={...a[t],amount:n},o([...a]))};return Object(u.jsxs)(O,{children:[Object(u.jsxs)(v,{onClick:()=>{s[p]=!s[p],i({...s})},children:[Object(u.jsxs)("a",{href:"https://coinmarketcap.com/currencies/".concat(x,"/"),target:"_blank",rel:"noreferrer",onClick:e=>e.stopPropagation(),children:[Object(u.jsx)("img",{src:"https://s2.coinmarketcap.com/static/img/coins/64x64/".concat(p,".png"),alt:p}),Object(u.jsxs)("span",{children:[Object(u.jsx)("span",{children:e||g||"unknown"}),N>0&&Object(u.jsxs)("span",{children:["Balance: ",(z=N,z>=1e9?j((z/1e9).toFixed(2))+"T":z>=1e6?j((z/1e6).toFixed(2))+"M":z>=1e3?j((z/1e3).toFixed(2))+"K":z)]})]})]}),d?Object(u.jsxs)("div",{className:"buttons",onClick:e=>e.stopPropagation(),children:[Object(u.jsx)("input",{placeholder:"Balance",type:"number",value:N,onChange:F,onKeyDown:e=>{"Enter"===e.key&&F(e)}}),Object(u.jsx)("button",{onClick:()=>E(!0),disabled:0===r,children:Object(u.jsx)(l.a,{})}),Object(u.jsx)("button",{onClick:()=>E(),disabled:r===a.length-1,children:Object(u.jsx)(l.b,{})}),Object(u.jsx)("button",{onClick:()=>t(p),className:"danger",children:Object(u.jsx)(l.i,{})})]}):Object(u.jsxs)("span",{className:"metrics",children:[Object(u.jsxs)("span",{className:"price ".concat(1===S?"up":-1===S?"down":""),children:[Object(u.jsxs)("span",{children:["$",P]}),N>0&&!!m&&Object(u.jsxs)("span",{children:["$",(m*N).toFixed(2)]})]}),Object(u.jsx)("span",{className:"percentage",style:{backgroundColor:b>0?"rgba(0, 255, 0, ".concat(Math.max(.5,Math.sqrt(Math.abs(b/20))),")"):"rgba(255, 0, 0, ".concat(Math.max(.5,Math.sqrt(Math.abs(b/20))),")")},children:b?"".concat(b.toFixed(2),"%"):""})]})]},p),Object(u.jsx)(C,{show:M,onClose:()=>{s[p]=!1,i({...s})},children:Object(u.jsx)(w,{children:Object(u.jsx)(L,{id:p,crypto:e||g})})})]});var z}));const P=i.a.p(E||(E=Object(s.a)(["\n  position: fixed;\n  bottom: 0;\n  margin: 0px auto;\n  font-size: 0.8em;\n  padding: 8px;\n  width: 100%;\n  background-color: var(--background-color);\n  /* border-top: 1px solid var(--border-color); */\n  display: grid;\n  grid-auto-flow: column;\n  grid-template-columns: 1fr 1fr;\n  align-items: center;\n  transition: all 0.3s ease-in-out, transform 0.3s linear 3s;\n\n  backdrop-filter: blur(6px);\n  a {\n    color: var(--text-color);\n    color: inherit;\n  }\n\n  &.Connecting {\n    background-color: yellow;\n    color: #000;\n  }\n  &.Connected {\n    background-color: rgba(0, 255, 0, 0.33);\n    transform: translateY(calc(100% - 4px));\n  }\n  &.Disconnected {\n    background-color: var(--down-color);\n  }\n  > *:first-child {\n    justify-self: start;\n  }\n  > *:last-child {\n    justify-self: end;\n  }\n"])));var F,z,I,R=({wsStatus:e,lastRefetch:n,reconnect:t})=>{const c=e,a=0===c||void 0===c?"Connecting":1===c?"Connected":3===c?"Disconnected":void 0;return Object(u.jsxs)(P,{className:a,children:[Object(u.jsx)("span",{children:Object(u.jsx)("i",{children:((+new Date-Number(n))/1e3).toFixed(0)+" Seconds ago"})}),Object(u.jsxs)("span",{children:[Object(u.jsx)("i",{children:a}),3===c&&Object(u.jsx)("button",{onClick:t,children:"Reconnect"})]})]})};const _=i.a.div(F||(F=Object(s.a)(["\n  cursor: pointer;\n  margin: 4px auto;\n\n  > img {\n    width: 1.5em;\n    margin-right: 0.5em;\n    vertical-align: middle;\n  }\n"]))),A=i.a.div(z||(z=Object(s.a)(["\n  width: 100%;\n  border-radius: 4px;\n  text-align: left;\n  padding-left: 8px;\n  z-index: 10;\n  max-height: calc(100vh - 150px);\n  overflow: scroll;\n"]))),T=i.a.div(I||(I=Object(s.a)(["\n  border-radius: 8px;\n  background: var(--gray-color);\n  text-align: center;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 4px;\n\n  &:hover {\n    filter: brightness(0.95);\n  }\n"])));var B=({onAdd:e,mapData:n})=>{const[t,a]=Object(c.useState)(""),o=Object.values(n),r=Object(c.useRef)(null),[s,i]=Object(c.useState)(!1),d=t?o.filter((e=>e.name.toLowerCase().includes(t.toLowerCase())||e.symbol.toLowerCase().includes(t.toLowerCase()))):[];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(T,{onClick:()=>{i(!0),setTimeout((()=>{var e;null===(e=r.current)||void 0===e||e.focus()}),500)},children:Object(u.jsx)(l.f,{})}),Object(u.jsxs)(C,{show:s,onClose:()=>{i(!1),a("")},children:[Object(u.jsx)("input",{value:t,onChange:e=>a(e.target.value),placeholder:o.length?"Try 'Bitcoin'":"Loading...",disabled:!o.length,ref:r,className:"crypto-search",style:{padding:"8px"}}),d.length?Object(u.jsx)(A,{className:"result",children:d.slice(0,100).map((n=>Object(u.jsxs)(_,{onClick:()=>{e(n.id),a(""),i(!1)},children:[Object(u.jsx)("img",{src:"https://s2.coinmarketcap.com/static/img/coins/64x64/".concat(n.id,".png"),alt:n.id}),n.name]},n.id)))}):null]})]})},Y=t(6),J=t.n(Y),q=t(7);var W=(e,n)=>{const[t,a]=Object(c.useState)(new Date),o=()=>J.a.get("".concat(q.a,"/api/proxy/crypto-watch/data-api/v3/cryptocurrency/listing?ids=").concat(e.join(","),"&aux=ath")).then((({data:e})=>{if(!(null===e||void 0===e?void 0:e.data))return;const t=e.data.cryptoCurrencyList;a(new Date),n((e=>e.map((e=>{const n=t.find((n=>n.id===e.id));var c,a,o,r;return n?{...e,price:(null===(c=n.quotes)||void 0===c||null===(a=c[0])||void 0===a?void 0:a.price)||0,p24h:(null===(o=n.quotes)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.percentChange24h)||0,name:n.name,slug:n.slug}:e}))))}));return Object(c.useEffect)((()=>{e.length&&o()}),[e.length,n]),[o,t]};var K=e=>{const[n,t]=Object(c.useState)((()=>localStorage.getItem(e)?JSON.parse(String(localStorage.getItem(e))).data:{})),a=Object(c.useCallback)((()=>J.a.get("".concat(q.a,"/api/proxy/crypto-watch/data-api/v3/map/all?cryptoAux=status&limit=10000&listing_status=active&start=1")).then((({data:n})=>{const c=n.data.cryptoCurrencyMap.reduce(((e,n)=>(e[n.id]=n,e)),{});t(c),localStorage.setItem(e,JSON.stringify({data:c,timeStamp:+new Date}))}))),[e]);return Object(c.useEffect)((()=>{if(localStorage.getItem(e)){JSON.parse(String(localStorage.getItem(e))).timeStamp+864e5<=Number(new Date)&&(console.log("refetch!"),a())}else console.log("init fetch!"),a()}),[a,e]),n};var U=(e,n)=>{const t=Object(c.useRef)(!1);Object(c.useEffect)((()=>{t.current?e():t.current=!0}),[n])};var $=function(e,n){const[t,a]=Object(c.useState)(e);return Object(c.useEffect)((()=>{const t=setTimeout((()=>{a(e)}),n);return()=>{clearTimeout(t)}}),[e,n]),t};var G=function(e){const[n,t]=Object(c.useState)(document.hasFocus());return Object(c.useEffect)((()=>{const n=()=>{const n=document.hasFocus();t(n),e(n)};return window.addEventListener("focus",n),window.addEventListener("blur",n),()=>{window.removeEventListener("focus",n),window.removeEventListener("blur",n)}}),[e]),n};var H,V=({onClose:e,onMessage:n,ids:t})=>{const[a,o]=Object(c.useState)(0),r=Object(c.useRef)(),s=$(t.join(","),5e3).split(",").filter(Boolean).map(Number),i=()=>{d().then((t=>{u(s),t.onmessage=function(e){null===n||void 0===n||n(e)},t.onclose=n=>{console.log("ws closed!"),null===e||void 0===e||e(),o(t.readyState),setTimeout((()=>{i()}),3e3)}}))};Object(c.useEffect)((()=>{s.length&&(l(),i())}),[s.length]);const l=()=>{var e;r.current&&((null===(e=r.current)||void 0===e?void 0:e.onclose)&&(r.current.onclose=null),r.current.close())},d=()=>new Promise(((e,n)=>{try{console.log("connecting...");const n=new WebSocket("wss://push.coinmarketcap.com/ws?device=web&client_source=home_page");return r.current=n,r.current.addEventListener("open",(t=>{console.log("ws opened!"),e(n)})),window.wsss=r.current,r.current}catch(t){console.log("reconnecting..."),setTimeout((()=>{d().then((n=>{e(n)}))}),3e3)}})),u=e=>{if(!r.current)return;const n=r.current;o(n.readyState);const t={method:"RSUBSCRIPTION",params:["main-site@crypto_price_5s@{}@normal",e.join(",")]};n.send(JSON.stringify(t))};return G((e=>{var n;e&&3===(null===(n=r.current)||void 0===n?void 0:n.readyState)&&i()})),[a,i]};J.a.create({headers:{Authorization:"Bearer 5fcb77e68787da1467daeea55f0dd01a017efdf3"}});const X=i.a.div(H||(H=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 8px;\n  /* position: absolute; */\n  /* bottom: 0.5em; */\n  width: 100%;\n  font-size: 0.8em;\n\n  a {\n    &:visited {\n      color: var(--text-color);\n    }\n  }\n\n  .export {\n    text-decoration: underline;\n  }\n"])));var Q=()=>Object(u.jsxs)(X,{className:"info",children:[Object(u.jsxs)("span",{children:["Data Source:"," ",Object(u.jsx)("a",{href:"https://coinmarketcap.com/",target:"_blank",rel:"noreferrer",children:"CoinMarketCap"})]}),"\xa0\xa0\xa0",Object(u.jsx)("span",{children:Object(u.jsx)("a",{href:"https://github.com/YueminHu/crypto_watch",target:"_blank",rel:"noreferrer",children:"Github"})})]}),Z=t(8);const ee=e=>new URL(window.location.href).searchParams.get(e);var ne;const te=i.a.div(ne||(ne=Object(s.a)(["\n  form > p:last-child {\n    display: flex;\n    justify-content: space-between;\n  }\n"])));var ce,ae,oe,re=({prices:e})=>{const[n,t]=Object(c.useState)(!1),[a,o]=Object(c.useState)(""),[r,s]=Object(c.useState)(""),[i,p]=Object(c.useState)(!1);Object(c.useEffect)((()=>{const e=ee("name");e&&o(e)}),[]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("button",{onClick:()=>{t(!0)},children:[Object(u.jsx)(l.c,{}),"Save"]}),Object(u.jsx)(C,{show:n,children:Object(u.jsx)(te,{children:Object(u.jsxs)("form",{onSubmit:n=>{n.preventDefault();const c=n.target,a=c.name.value,o=c.secret.value;if(!a)return alert("name is required!");const r={name:a,secret:o,list:e.map((e=>({id:e.id,amount:e.amount?e.amount:void 0})))};p(!0),J.a.post("".concat(q.a,"/api/v1/crypto-watch-name"),r).then((e=>{0===e.data.status.code&&(((e,n)=>{const t=new URL(window.location.href);n&&n.forEach((e=>t.searchParams.delete(e))),Object.keys(e).forEach((n=>{t.searchParams.set(n,String(e[n]))})),window.history.replaceState("",document.title,t)})({name:r.name},["ids"]),t(!1)),alert("status: "+e.data.status.code)})).catch((e=>{alert(e.message)})).finally((()=>{p(!1)}))},children:[Object(u.jsx)("p",{children:Object(u.jsx)("input",{type:"text",placeholder:"name...",name:"name",value:a,onChange:e=>o(e.target.value)})}),Object(u.jsx)("p",{children:Object(u.jsx)("input",{type:"text",placeholder:"secret...",name:"secret",value:r,onChange:e=>s(e.target.value)})}),Object(u.jsxs)("p",{children:[Object(u.jsx)("button",{onClick:()=>t(!1),children:"Cancel"}),Object(u.jsx)("button",{type:"submit",disabled:i,children:i?Object(u.jsx)(d.a,{}):"Save"})]})]})})})]})};const se="-",ie="LOCAL_ID_KEY",le=i.a.div(ce||(ce=Object(s.a)(["\n  text-align: left;\n  padding: 0px 8px;\n  display: grid;\n  --columns-count: 3;\n  grid-template-columns: repeat(var(--columns-count), 1fr);\n  gap: 8px;\n  @media screen and (min-width: 1200px) {\n    --columns-count: 4;\n  }\n  @media screen and (min-width: 551px) and (max-width: 850px) {\n    --columns-count: 2;\n  }\n  @media screen and (max-width: 550px) {\n    --columns-count: 1;\n  }\n"]))),de=i.a.div(ae||(ae=Object(s.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: sticky;\n  padding: 8px;\n  /* top: 0; */\n  background-image: linear-gradient(\n    to bottom,\n    var(--background-color) 0%,\n    var(--background-color) 70%,\n    transparent 100%\n  );\n  top: -1px;\n  z-index: 10;\n  @media screen and (max-width: 450px) {\n    flex-direction: column;\n    /* overflow: hidden; */\n  }\n\n  > div:first-child {\n    flex-grow: 1;\n  }\n\n  > p.buttons {\n    white-space: nowrap;\n    width: 100%;\n    overflow: scroll;\n    padding: 4px 8px;\n    margin: 0px;\n  }\n"]))),ue=(i.a.div(oe||(oe=Object(s.a)(["\n  text-align: center;\n  cursor: pointer;\n  margin: 32px auto;\n  font-weight: bold;\n"]))),()=>{const e=new URL(window.location.href);if(e.searchParams.get("name"))return[];const n=localStorage.getItem(ie)||e.searchParams.get("ids")||"",t=n.match(/[a-z]/);return n?n.split("_").map((e=>({id:e.includes(se)?parseInt(e.split(se)[0],t?36:10):parseInt(e,t?36:10)||1,amount:e.includes(se)?Number(e.split(se)[1]):""}))):[]});function pe(){const[e,n]=Object(c.useState)(!1),[t,a]=Object(c.useState)(ue),[o,r]=Object(c.useState)({}),s=t.map((({id:e})=>e)),i=t.map((({amount:e})=>e)),d=K("LOCAL_KEY"),[p,j]=W(s,a),[h,m]=V({ids:s,onClose:()=>p(),onMessage:e=>{const n=JSON.parse(e.data);if(null===n||void 0===n?void 0:n.d){const e=n.d;Z.a.emit("WS-".concat(e.id),e),a((n=>n.map((n=>n.id===e.id?{...e,...n,price:e.p,p24h:e.p24h}:n))))}else console.log(n)}}),x=(e,n)=>{s.includes(e)&&n||a((t=>n?[{id:e},...t]:t.filter((n=>n.id!==e))))};return Object(c.useEffect)((()=>{const e=ee("name");e&&J.a.get("".concat(q.a,"/api/v1/crypto-watch-name?name=").concat(e)).then((e=>{e.data.data&&a(e.data.data)}))}),[]),U((()=>{const e=s.map(((e,n)=>e.toString(36)+(i[n]?"".concat(se).concat(i[n]):""))).join("_");localStorage.setItem(ie,e)}),s.join()+i.join()),Object(u.jsx)(b,{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(de,{children:Object(u.jsxs)("p",{className:"buttons",children:[Object(u.jsxs)("button",{onClick:()=>{const e=[...t];e.sort(((e,n)=>e.amount&&e.price&&n.price&&n.amount&&"number"===typeof e.amount&&"number"===typeof n.amount?n.amount*n.price-e.amount*e.price:-1/0)),a(e)},children:[Object(u.jsx)(l.h,{}),"Sort Value"]}),"\xa0",Object(u.jsxs)("button",{onClick:()=>{const e=[...t];e.sort(((e,n)=>e.p24h&&n.p24h?n.p24h-e.p24h:1/0)),a(e)},children:[Object(u.jsx)(l.g,{}),"Sort Change"]}),"\xa0",Object(u.jsxs)("button",{onClick:()=>r({}),children:[Object(u.jsx)(l.e,{}),"Fold All"]}),"\xa0",Object(u.jsxs)("button",{onClick:()=>n(!e),children:[Object(u.jsx)(l.d,{}),e?"Done":"Edit"]}),"\xa0",Object(u.jsx)(re,{prices:t})]})}),Object(u.jsxs)(le,{children:[t.length?t.map(((n,c)=>{var s;return Object(u.jsx)(M,{name:null===(s=d[n.id])||void 0===s?void 0:s.symbol,info:n,onRemove:e=>x(e),prices:t,setPrices:a,idx:c,expandStatus:o,setExpandStatus:r,edit:e},n.id)})):null,Object(u.jsx)(B,{onAdd:e=>x(e,!0),mapData:d})]}),t.some((e=>!!e.amount))&&Object(u.jsxs)("p",{children:["Total Balance: $",Object(u.jsx)("b",{children:t.reduce(((e,n)=>n.amount&&n.price&&"number"==typeof n.amount?e+n.amount*n.price:e),0).toFixed(2)})]}),Object(u.jsx)(Q,{}),s.length?Object(u.jsx)(R,{wsStatus:h,reconnect:m,lastRefetch:j}):null]})})}var be=e=>{e&&e instanceof Function&&t.e(5).then(t.bind(null,56)).then((({getCLS:n,getFID:t,getFCP:c,getLCP:a,getTTFB:o})=>{n(e),t(e),c(e),a(e),o(e)}))};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(pe,{})}),document.getElementById("root")),be()},7:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var c=t(6),a=t.n(c),o=t(0),r=t(8);const s={"1D":300,"7D":300,"1M":3600,"1Y":86400,ALL:86400},i="https://yoomin.us";n.b=(e,n)=>{const[t,c]=Object(o.useState)([]),[l,d]=Object(o.useState)(!0),u=Object(o.useCallback)((()=>(d(!0),a.a.get("".concat(i,"/api/proxy/crypto-watch/data-api/v3/cryptocurrency/detail/chart?id=").concat(e,"&range=").concat(n)).then((({data:e})=>{const n=Object.entries(e.data.points).map((([e,n])=>({time:Number(e),value:n.v[0]})));return c(n),n})).catch((e=>[])).finally((()=>{d(!1)})))),[e,n]);return Object(o.useEffect)((()=>{u();const t=r.a.subscribe("WS-".concat(e),(e=>{c((t=>{if(!t.length)return t;const c=t[t.length-1],a=1e3*c.time;return Number(new Date)-a>=1e3*s[n]?[...t,{time:Math.floor(Number(new Date)/1e3),value:e.p}]:(c.value=e.p,[...t])}))}));return()=>{console.log("unsubscribe!"),r.a.unsubscribe("WS-".concat(e),t)}}),[e,n,u]),[t,l]}},8:function(e,n,t){"use strict";n.a=new class{constructor(){this.cbs=void 0,this.cbs={}}subscribe(e,n){return this.cbs[e]||(this.cbs[e]=[]),this.cbs[e].push(n),n}unsubscribe(e,n){this.cbs[e]&&(this.cbs[e]=this.cbs[e].filter((e=>e!==n)),0===this.cbs[e].length&&delete this.cbs[e])}emit(e,n){this.cbs[e]&&this.cbs[e].forEach((e=>e(n)))}}}},[[53,1,2]]]);
//# sourceMappingURL=main.7bc9fe54.chunk.js.map