{"version":3,"sources":["components/useUpdateData.ts","utils/eventEmitter.ts","components/Spinner.tsx","context/index.tsx","utils/number.ts","Cell/styled.ts","Cell/index.tsx","Footer.tsx","Add.tsx","hooks/useGetListings.ts","hooks/useGetMapStorage.ts","hooks/useSubsequentUpdate.ts","hooks/useWebSocket.ts","Info.tsx","components/modal.tsx","utils/dom.ts","saveList.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["TimeInterval","APIHost","useUpdateData","id","period","useState","data","setData","loading","setLoading","getData","useCallback","axios","get","then","mappedData","Object","entries","points","map","key","value","time","Number","v","catch","e","finally","useEffect","subscriber","eventEmitter","subscribe","wsData","length","lastData","lastDataTime","Date","Math","floor","p","console","log","unsubscribe","EventEmitter","cbs","this","event","cb","push","filter","func","forEach","spin","keyframes","SpinnerWrapper","styled","span","Spinner","GlobalContext","React","createContext","setPeriod","GlobalContextProvider","children","Provider","removeTrailingZeros","num","String","replace","priceFormatter","price","toFixed","max","log10","count","determineFraction","Wrapper","div","CellWrapper","MoreSection","ChartsWrapper","InputWrapper","LazyChart","lazy","ChartsGroup","memo","useContext","globalPeriod","setGlobalPeriod","className","undefined","onClick","Charts","fallback","PriceCell","name","info","onRemove","prices","setPrices","idx","expandStatus","setExpandStatus","edit","p24h","slug","symbol","propsAmount","amount","lastPrice","useRef","isUp","setIsUp","setAmount","current","setTimeout","onMove","idxOffset","temp","isExpanded","priceDisplay","useMemo","href","target","rel","stopPropagation","src","alt","disabled","style","backgroundColor","sqrt","abs","placeholder","type","onChange","newAmount","elementIndex","findIndex","token","Footer","wsStatus","lastRefetch","reconnect","status","statusString","TokenList","AddToken","onAdd","mapData","search","setSearch","mapArr","values","ref","searchRes","toLowerCase","includes","slice","r","focus","useGetListings","ids","setter","setLastRefetch","refetch","join","priceData","cryptoCurrencyList","d","find","quotes","percentChange24h","useGetMapStorage","localStorage","getItem","JSON","parse","setMapData","fetchMap","storedData","cryptoCurrencyMap","reduce","prev","next","setItem","stringify","timeStamp","useSubsequentUpdate","deps","mounted","useWbSocket","onClose","onMessage","setWSStatus","WSInstance","resubscribing","initWS","WS","WebSocket","subscribeWS","readyState","onopen","param","method","cryptoIds","send","onmessage","res","addEventListener","close","closeWS","instance","create","headers","Authorization","Info","patch","long_url","navigator","clipboard","writeText","link","alert","Modal","show","createPortal","document","body","getSearchParams","URL","window","location","searchParams","ModalWrapper","SaveList","modalShow","setModalShow","setName","secret","setSecret","defaultName","onSubmit","preventDefault","form","list","post","code","records","deletes","url","deleted","delete","keys","set","history","replaceState","title","writeURL","message","AMOUNT_SEPARATOR","LOCAL_ID_KEY","HeadWrapper","Guide","getIds","idsStored","hasNewFormat","match","split","parseInt","App","setEdit","idsArray","amountsArray","cryptoListData","refetchAPI","cr","emit","handleAddOrRemove","add","idsString","toString","Add","newPrices","sort","a","b","Infinity","querySelector","some","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f6698e09.chunk.js","sourcesContent":["import axios from \"axios\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport eventEmitter from \"../utils/eventEmitter\";\n\nconst TimeInterval: any = {\n  \"1D\": 300,\n  \"7D\": 300,\n  \"1M\": 3600,\n  \"3M\": 3600,\n  \"1Y\": 86400,\n};\n\nexport const APIHost =\n  process.env.NODE_ENV === \"production\"\n    ? \"https://yoomin.us\"\n    : \"https://yoomin.us\";\n\nconst useUpdateData = (id: number, period: string): [any[], boolean] => {\n  const [data, setData] = useState<any[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n\n  const getData = useCallback(() => {\n    // clear();\n    setLoading(true);\n    return axios\n      .get(\n        `${APIHost}/api/proxy/crypto-watch/data-api/v3/cryptocurrency/detail/chart?id=${id}&range=${period}`\n      )\n      .then(({ data }) => {\n        const mappedData = Object.entries<any>(data.data.points).map(\n          ([key, value]) => ({\n            time: Number(key),\n            value: value.v[0],\n          })\n        );\n        setData(mappedData);\n        return mappedData;\n      })\n      .catch((e) => {\n        return [];\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n\n    // return () => eventEmitter.unsubscribe(`WS-${id}`, subscriber);\n  }, [id, period]);\n\n  useEffect(() => {\n    getData();\n    const subscriber = eventEmitter.subscribe(`WS-${id}`, (wsData: any) => {\n      setData((data) => {\n        if (!data.length) return data;\n        const lastData = data[data.length - 1];\n        const lastDataTime = lastData.time * 1000;\n        const now = Number(new Date());\n        const shouldInsertNewData = TimeInterval[period] * 1000;\n        // console.log(now, lastDataTime, shouldInsertNewData);\n        if (now - lastDataTime >= shouldInsertNewData) {\n          // console.log(\"insert new line!\");\n          return [\n            ...data,\n            {\n              time: Math.floor(Number(new Date()) / 1000),\n              value: wsData.p,\n            },\n          ];\n        } else {\n          // lastData.time = now\n          // console.log(\"in-place update!\");\n          lastData.value = wsData.p;\n          return [...data];\n        }\n        // console.log(lastDataTime);\n        // // console.log(data);\n        // return data;\n      });\n    });\n    return () => {\n      console.log(\"unsubscribe!\");\n      eventEmitter.unsubscribe(`WS-${id}`, subscriber);\n    };\n  }, [id, period, getData]);\n\n  return [data, loading];\n};\n\nexport default useUpdateData;\n","type Events = string;\n\nclass EventEmitter {\n  cbs: {\n    [key: string]: any[];\n  };\n  constructor() {\n    this.cbs = {};\n  }\n  subscribe(event: Events, cb: any) {\n    if (!this.cbs[event]) {\n      this.cbs[event] = [];\n    }\n    this.cbs[event].push(cb);\n    return cb;\n    // this.cbs.push(cb);\n  }\n  unsubscribe(event: Events, cb: any) {\n    if (this.cbs[event]) {\n      this.cbs[event] = this.cbs[event].filter((func) => func !== cb);\n      if (this.cbs[event].length === 0) {\n        delete this.cbs[event];\n      }\n    }\n  }\n  emit(event: Events, data: any) {\n    if (this.cbs[event]) {\n      this.cbs[event].forEach((cb) => cb(data));\n    }\n  }\n}\n\nexport default new EventEmitter();\n","import styled, { keyframes } from \"styled-components\";\n\nconst spin = keyframes`\n    to {\n        transform: rotate(1turn);\n    }\n`;\n\nconst SpinnerWrapper = styled.span`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-grow: 1;\n  > span {\n    border: 3px solid var(--border-color);\n    border-radius: 50%;\n    border-top-color: var(--text-color);\n    width: 1em;\n    height: 1em;\n    animation: ${spin} 1s linear 0s infinite;\n  }\n`;\n\nconst Spinner = () => {\n  return (\n    <SpinnerWrapper>\n      <span></span>\n    </SpinnerWrapper>\n  );\n};\n\nexport default Spinner;\n","import React, { useState } from \"react\";\n\ntype Periods = \"1D\" | \"7D\" | \"1M\" | \"3M\" | \"1Y\";\n\nexport const GlobalContext = React.createContext<{\n  period: Periods;\n  setPeriod: React.Dispatch<React.SetStateAction<Periods>>;\n}>({\n  period: \"1D\",\n  setPeriod: () => void 0,\n});\n\nexport const GlobalContextProvider: React.FC = ({ children }) => {\n  const [period, setPeriod] = useState<Periods>(\"1D\");\n  return (\n    <GlobalContext.Provider\n      value={{\n        period,\n        setPeriod,\n      }}\n    >\n      {children}\n    </GlobalContext.Provider>\n  );\n};\n","export const determineFraction = (num: number) => {\n  if (num >= 1) {\n    return Math.max(1, 4 - Math.floor(Math.log10(num)));\n  } else {\n    let count = -2;\n    // let num = 0.000001;\n    while (1 - num >= 0) {\n      num *= 10;\n      count += 1;\n    }\n    return Math.max(4, 4 + count);\n  }\n};\n\nexport const abbreviateNumber = (num: number) => {\n  if (num >= 1000000) {\n    return removeTrailingZeros((num / 1000000).toFixed(2)) + \"M\";\n  }\n  if (num >= 1000) {\n    return removeTrailingZeros((num / 1000).toFixed(2)) + \"K\";\n  }\n  return num;\n};\n\nexport const removeTrailingZeros = (num: number | string) => {\n  return String(num).replace(/\\.?0+$/, \"\");\n};\n\nexport const priceFormatter = (price: number) => {\n  return removeTrailingZeros(price.toFixed(determineFraction(price)));\n};\n","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div`\n  position: relative;\n  overflow: hidden;\n  display: inline-block;\n  padding: 6px 8px;\n  /* margin-top: 8px; */\n  vertical-align: top;\n  /* display: inline-block; */\n  /* border-left: 1px solid #fff; */\n  /* border-radius: 4px; */\n  cursor: pointer;\n  box-sizing: border-box;\n  user-select: none;\n  white-space: nowrap;\n  width: 33%;\n  /* border-bottom: 1px solid var(--border-color); */\n  @media screen and (min-width: 1200px) {\n    width: 25%;\n  }\n  @media screen and (min-width: 451px) and (max-width: 750px) {\n    width: calc(50%);\n  }\n  @media screen and (max-width: 450px) {\n    width: 100%;\n    /* overflow: hidden; */\n  }\n  button {\n    /* font-size: 0.8em; */\n    /* height: 80%; */\n  }\n  .buttons {\n    display: grid;\n    grid-auto-flow: column;\n    gap: 4px;\n    margin-left: 8px;\n    /* position: absolute; */\n    right: 0;\n    top: 0;\n    height: 100%;\n    z-index: 10;\n    background-color: var(--background-color);\n    /* transform: translateX(calc(101%)); */\n    transition: all 0.3s ease;\n    /* &.edit {\n      transform: none;\n    } */\n    /* overflow: hidden; */\n    /* > button {\n    } */\n    /* background: red; */\n  }\n`;\n\nexport const CellWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  /* &:hover {\n    transform: translateY(-2px);\n  } */\n  @media screen and (max-width: 450px) {\n    > a:first-child {\n      max-width: 45vw;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n  > span.metrics {\n    display: flex;\n    align-items: center;\n  }\n  > a {\n    color: inherit;\n    font-size: 1.1rem;\n    text-decoration: none;\n    font-weight: bold;\n    > span {\n      display: inline-flex;\n      flex-direction: column;\n      vertical-align: middle;\n      > span:nth-child(2) {\n        font-size: 0.8rem;\n        opacity: 0.5;\n      }\n    }\n  }\n  img {\n    width: 2rem;\n    margin-right: 0.5em;\n    vertical-align: middle;\n  }\n  span.price {\n    font-weight: bold;\n    font-size: 1.1rem;\n    transition: all 0.1s linear;\n    display: inline-flex;\n    flex-direction: column;\n    align-items: flex-end;\n    vertical-align: bottom;\n    &.up {\n      color: var(--up-color);\n    }\n    &.down {\n      color: var(--down-color);\n    }\n    > span:nth-child(2) {\n      font-size: 0.8rem;\n      opacity: 0.5;\n    }\n  }\n  span.percentage {\n    padding: 4px 8px;\n    border-radius: 4px;\n    color: #fff;\n    margin-left: 12px;\n    display: inline-block;\n    text-align: center;\n    /* width: 4.5em; */\n  }\n`;\n\nexport const MoreSection = styled.div`\n  padding-top: 8px;\n  /* border-bottom: 1px solid var(--border-color); */\n  justify-content: space-between;\n  display: flex;\n  position: relative;\n  overflow: hidden;\n`;\n\nexport const ChartsWrapper = styled.div`\n  display: flex;\n  flex-grow: 1;\n  .switch {\n    display: grid;\n    margin-right: 8px;\n    > span {\n      border: 1px solid transparent;\n      border-top-left-radius: 6px;\n      border-bottom-left-radius: 6px;\n      padding: 2px 4px;\n      border-right-color: #1fe230;\n      &.selected {\n        /* color: yellow; */\n        border-color: #1fe230;\n        border-right-color: transparent;\n      }\n    }\n  }\n  img {\n    width: 100%;\n  }\n`;\n\nexport const InputWrapper = styled.div`\n  display: flex;\n  margin: 8px 0px 0px;\n  input {\n    border-bottom: none;\n    /* width: auto; */\n    flex-grow: 1;\n  }\n  button {\n    cursor: pointer;\n  }\n  span {\n    padding-top: 2px;\n  }\n`;\n","import { IconCaretLeft, IconCaretRight, IconTrash } from \"@tabler/icons\";\nimport {\n  lazy,\n  memo,\n  Suspense,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\n// import styled from \"styled-components\";\n// import ImgLoading from \"./components/ImgLoading\";\nimport Spinner from \"../components/Spinner\";\nimport { GlobalContext } from \"../context\";\nimport {\n  abbreviateNumber,\n  determineFraction,\n  priceFormatter,\n  removeTrailingZeros,\n} from \"../utils/number\";\nimport {\n  CellWrapper,\n  ChartsWrapper,\n  InputWrapper,\n  MoreSection,\n  Wrapper,\n} from \"./styled\";\n\nconst LazyChart = lazy(() => import(\"../components/chart\"));\n\nconst ChartsGroup = memo<any>(({ id = 1 }) => {\n  const { period: globalPeriod, setPeriod: setGlobalPeriod } =\n    useContext(GlobalContext);\n  const [period, setPeriod] = useState(globalPeriod);\n  useEffect(() => {\n    setGlobalPeriod(period);\n  }, [setGlobalPeriod, period]);\n  return (\n    <ChartsWrapper>\n      <div className='switch'>\n        <span\n          className={period === \"1D\" ? \"selected\" : undefined}\n          onClick={() => setPeriod(\"1D\")}\n        >\n          24h\n        </span>\n        <span\n          className={period === \"7D\" ? \"selected\" : undefined}\n          onClick={() => setPeriod(\"7D\")}\n        >\n          7D\n        </span>\n        <span\n          className={period === \"1M\" ? \"selected\" : undefined}\n          onClick={() => setPeriod(\"1M\")}\n        >\n          1M\n        </span>\n        <span\n          className={period === \"3M\" ? \"selected\" : undefined}\n          onClick={() => setPeriod(\"3M\")}\n        >\n          3M\n        </span>\n        <span\n          className={period === \"1Y\" ? \"selected\" : undefined}\n          onClick={() => setPeriod(\"1Y\")}\n        >\n          1Y\n        </span>\n      </div>\n      <Charts id={id} period={period} />\n    </ChartsWrapper>\n  );\n});\n\nconst Charts = ({ id = 1, period = \"1D\" }) => {\n  return (\n    <Suspense fallback={<Spinner />}>\n      <LazyChart id={id} period={period} />\n    </Suspense>\n  );\n};\n\nconst PriceCell = memo(\n  ({\n    name,\n    info,\n    onRemove,\n    prices,\n    setPrices,\n    idx,\n    expandStatus,\n    setExpandStatus,\n    edit,\n  }: any) => {\n    const { id, p24h, price, slug, symbol, amount: propsAmount } = info;\n    const lastPrice = useRef(price);\n    const [isUp, setIsUp] = useState<1 | 0 | -1>(0);\n\n    const [amount, setAmount] = useState(propsAmount);\n\n    useEffect(() => {\n      if (\n        price !== lastPrice.current &&\n        price !== undefined &&\n        lastPrice.current !== undefined\n      ) {\n        if (lastPrice.current < price) {\n          setIsUp(1);\n        } else {\n          setIsUp(-1);\n        }\n        setTimeout(() => setIsUp(0), 1000);\n      }\n      lastPrice.current = price;\n    }, [price]);\n\n    const onMove = (isUp?: boolean) => {\n      const idxOffset = isUp ? -1 : 1;\n      const temp = prices[idx + idxOffset];\n      prices[idx + idxOffset] = prices[idx];\n      prices[idx] = temp;\n\n      setPrices([...prices]);\n    };\n\n    const isExpanded = !!expandStatus[id];\n\n    const priceDisplay = useMemo(() => {\n      return price ? priceFormatter(price) : \"-\";\n    }, [price]);\n\n    return (\n      <Wrapper>\n        <CellWrapper\n          key={id}\n          onClick={() => {\n            expandStatus[id] = !expandStatus[id];\n            setExpandStatus({ ...expandStatus });\n          }}\n        >\n          <a\n            href={`https://coinmarketcap.com/currencies/${slug}/`}\n            target='_blank'\n            rel='noreferrer'\n            onClick={(e) => e.stopPropagation()}\n          >\n            <img\n              src={`https://s2.coinmarketcap.com/static/img/coins/64x64/${id}.png`}\n              alt={id}\n            />\n            <span>\n              <span>{name || symbol || \"unknown\"}</span>\n              {amount > 0 && <span>Balance: {abbreviateNumber(amount)}</span>}\n            </span>\n          </a>\n          {edit ? (\n            <div className={`buttons`} onClick={(e) => e.stopPropagation()}>\n              <button onClick={() => onMove(true)} disabled={idx === 0}>\n                <IconCaretLeft></IconCaretLeft>\n              </button>\n              <button\n                onClick={() => onMove()}\n                disabled={idx === prices.length - 1}\n              >\n                <IconCaretRight></IconCaretRight>\n              </button>\n              <button onClick={() => onRemove(id)} className='danger'>\n                <IconTrash></IconTrash>\n              </button>\n            </div>\n          ) : (\n            <span className='metrics'>\n              <span\n                className={`price ${\n                  isUp === 1 ? \"up\" : isUp === -1 ? \"down\" : \"\"\n                }`}\n              >\n                {amount > 0 && !!price && (\n                  <span>${(price * amount).toFixed(2)}</span>\n                )}\n                <span>${priceDisplay}</span>\n              </span>\n              <span\n                className='percentage'\n                style={{\n                  backgroundColor:\n                    p24h > 0\n                      ? `rgba(0, 255, 0, ${Math.max(\n                          0.5,\n                          Math.sqrt(Math.abs(p24h / 10))\n                        )})`\n                      : `rgba(255, 0, 0, ${Math.max(\n                          0.5,\n                          Math.sqrt(Math.abs(p24h / 10))\n                        )})`,\n                }}\n              >\n                {p24h ? `${p24h.toFixed(2)}%` : \"\"}\n              </span>\n            </span>\n          )}\n        </CellWrapper>\n        {isExpanded && (\n          <InputWrapper>\n            <span>Balance: </span>\n            <input\n              placeholder='input amount...'\n              type={\"number\"}\n              value={amount}\n              onChange={(e) => {\n                const newAmount = Number(e.target.value);\n                setAmount(newAmount);\n                const elementIndex = prices.findIndex(\n                  (token: any) => token.id === id\n                );\n                if (elementIndex >= 0) {\n                  prices[elementIndex] = {\n                    ...prices[elementIndex],\n                    amount: newAmount,\n                  };\n                  setPrices([...prices]);\n                }\n              }}\n            ></input>\n            {/* <button\n              onClick={() => {\n                // console.log(prices);\n                \n              }}\n            >\n              OK\n            </button> */}\n          </InputWrapper>\n        )}\n\n        {isExpanded && (\n          <MoreSection>\n            <ChartsGroup id={id} />\n          </MoreSection>\n        )}\n      </Wrapper>\n    );\n  }\n);\n\nexport default PriceCell;\n","import styled from \"styled-components\";\n\n// const;\n\nconst Wrapper = styled.p`\n  position: fixed;\n  bottom: 0;\n  margin: 0px auto;\n  font-size: 0.8em;\n  padding: 8px;\n  width: 100%;\n  background-color: var(--background-color);\n  /* border-top: 1px solid var(--border-color); */\n  display: grid;\n  grid-auto-flow: column;\n  grid-template-columns: 1fr 1fr;\n  align-items: center;\n  transition: all 0.3s ease-in-out, transform 0.3s linear 3s;\n\n  backdrop-filter: blur(6px);\n  a {\n    color: var(--text-color);\n    color: inherit;\n  }\n\n  &.Connecting {\n    background-color: yellow;\n    color: #000;\n  }\n  &.Connected {\n    background-color: rgba(0, 255, 0, 0.33);\n    transform: translateY(calc(100% - 4px));\n  }\n  &.Disconnected {\n    background-color: var(--down-color);\n  }\n  > *:first-child {\n    justify-self: start;\n  }\n  > *:last-child {\n    justify-self: end;\n  }\n`;\n\nconst Footer = ({\n  wsStatus,\n  lastRefetch,\n  reconnect,\n}: // reconnect,\n{\n  wsStatus: number;\n  lastRefetch: Date;\n  reconnect: any;\n}) => {\n  const status = wsStatus;\n  //   console.log(status);\n  const statusString =\n    status === 0 || status === undefined\n      ? \"Connecting\"\n      : status === 1\n      ? \"Connected\"\n      : status === 3\n      ? \"Disconnected\"\n      : undefined;\n  return (\n    <Wrapper className={statusString}>\n      <span>\n        <i>\n          {((+new Date() - Number(lastRefetch)) / 1000).toFixed(0) +\n            \" Seconds ago\"}\n        </i>\n      </span>\n      <span>\n        <i>{statusString}</i>\n        {status === 3 && <button onClick={reconnect}>Reconnect</button>}\n      </span>\n    </Wrapper>\n  );\n};\n\nexport default Footer;\n","import { useRef, useState } from \"react\";\nimport styled from \"styled-components\";\n\nconst TokenList = styled.div`\n  cursor: pointer;\n  margin: 4px auto;\n  > img {\n    width: 1.5em;\n    margin-right: 0.5em;\n    vertical-align: middle;\n  }\n`;\n\nconst Wrapper = styled.div`\n  margin: 12px 0px;\n  width: 100%;\n  > div {\n    position: absolute;\n    background: var(--background-color);\n    border: 1px solid var(--border-color);\n    border-radius: 4px;\n    width: 100%;\n    text-align: left;\n    padding-left: 8px;\n    z-index: 10;\n  }\n`;\n\nconst AddToken = ({ onAdd, mapData }: any) => {\n  const [search, setSearch] = useState(\"\");\n  const mapArr = Object.values(mapData);\n  const ref = useRef<HTMLInputElement>(null);\n\n  // useEffect(() => {\n  //   ref.current?.focus();\n  // }, []);\n\n  const searchRes = search\n    ? mapArr.filter(\n        (token: any) =>\n          token.name.toLowerCase().includes(search.toLowerCase()) ||\n          token.symbol.toLowerCase().includes(search.toLowerCase())\n      )\n    : [];\n  return (\n    <Wrapper>\n      <input\n        value={search}\n        onChange={(e) => setSearch(e.target.value)}\n        placeholder={mapArr.length ? \"Try 'Bitcoin'\" : \"Loading...\"}\n        disabled={!mapArr.length}\n        ref={ref}\n        className='crypto-search'\n      />\n      {searchRes.length ? (\n        <div>\n          {searchRes.slice(0, 10).map((r: any) => (\n            <TokenList\n              key={r.id}\n              onClick={() => {\n                onAdd(r.id);\n                setSearch(\"\");\n                setTimeout(() => {\n                  ref.current?.focus();\n                }, 500);\n              }}\n            >\n              <img\n                src={`https://s2.coinmarketcap.com/static/img/coins/64x64/${r.id}.png`}\n                alt={r.id}\n              />\n              {r.name}\n            </TokenList>\n          ))}\n        </div>\n      ) : null}\n    </Wrapper>\n  );\n};\n\nexport default AddToken;\n","import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { APIHost } from \"../components/useUpdateData\";\n\nconst useGetListings = (\n  ids: number[],\n  setter: React.Dispatch<\n    React.SetStateAction<\n      {\n        id: number;\n        price?: number | undefined;\n        p24h?: number | undefined;\n      }[]\n    >\n  >\n  // refetch: boolean\n): [() => Promise<any>, Date] => {\n  // console.log(refetch);\n\n  const [lastRefetch, setLastRefetch] = useState(new Date());\n\n  const refetch = () =>\n    axios\n      .get(\n        `${APIHost}/api/proxy/crypto-watch/data-api/v3/cryptocurrency/listing?ids=${ids.join(\n          \",\"\n        )}&aux=ath`\n      )\n      .then(({ data }) => {\n        if (!data?.data) return;\n        const priceData = data.data.cryptoCurrencyList;\n        setLastRefetch(new Date());\n        setter((data) => {\n          return data.map((d) => {\n            const find = priceData.find((p: any) => p.id === d.id);\n            // console.log(find);\n            // console.log(d.id);\n            if (find) {\n              return {\n                ...d,\n                price: find.quotes?.[0]?.price || 0,\n                p24h: find.quotes?.[0]?.percentChange24h || 0,\n                name: find.name,\n                slug: find.slug,\n              };\n            } else {\n              return d;\n            }\n          });\n        });\n      });\n  useEffect(() => {\n    refetch();\n    // if (!refetch) return;\n    // console.log(\"call!!\");\n  }, [ids.length, setter]);\n  return [refetch, lastRefetch];\n};\n\nexport default useGetListings;\n","import axios from \"axios\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { APIHost } from \"../components/useUpdateData\";\n\nconst useGetMapStorage = (key: string) => {\n  const [mapData, setMapData] = useState<any>(() =>\n    localStorage.getItem(key)\n      ? JSON.parse(String(localStorage.getItem(key))).data\n      : {}\n  );\n  const fetchMap = useCallback(\n    () =>\n      axios\n        .get(\n          `${APIHost}/api/proxy/crypto-watch/data-api/v3/map/all?cryptoAux=status&limit=10000&listing_status=active&start=1`\n        )\n        .then(({ data }) => {\n          const storedData = data.data.cryptoCurrencyMap.reduce(\n            (prev: any, next: any) => {\n              prev[next.id] = next;\n              return prev;\n            },\n            {}\n          );\n          // console.log(storedData);\n          setMapData(storedData);\n          localStorage.setItem(\n            key,\n            JSON.stringify({\n              data: storedData,\n              timeStamp: +new Date(),\n            })\n          );\n        }),\n    [key]\n  );\n  useEffect(() => {\n    if (localStorage.getItem(key)) {\n      const timeStamp = JSON.parse(String(localStorage.getItem(key))).timeStamp;\n      if (timeStamp + 1000 * 3600 * 24 <= Number(new Date())) {\n        console.log(\"refetch!\");\n        fetchMap();\n      }\n    } else {\n      console.log(\"init fetch!\");\n      fetchMap();\n    }\n  }, [fetchMap, key]);\n  return mapData;\n};\n\nexport default useGetMapStorage;\n","import { useEffect, useRef } from \"react\";\n\nconst useSubsequentUpdate = (cb: any, deps: string) => {\n  const mounted = useRef(false);\n  useEffect(() => {\n    if (!mounted.current) {\n      mounted.current = true;\n      return;\n    }\n    cb();\n  }, [deps]);\n};\n\nexport default useSubsequentUpdate;\n","import { useEffect, useRef, useState } from \"react\";\n\nconst useWbSocket = ({\n  onClose,\n  onMessage,\n  ids,\n}: {\n  onClose: any;\n  onMessage: any;\n  ids: any;\n}) => {\n  const [wsStatus, setWSStatus] = useState<number>(0);\n  const WSInstance = useRef<WebSocket>();\n  const resubscribing = useRef(false);\n\n  useEffect(() => {\n    if (ids.length) {\n      resubscribing.current = true;\n      reconnect();\n    }\n  }, [ids.length]);\n\n  const initWS = () => {\n    let WS;\n    try {\n      WS = new WebSocket(\"wss://stream.coinmarketcap.com/price/latest\");\n      WSInstance.current = WS;\n    } catch (e) {\n      console.log(\"reconnect!\");\n      setTimeout(() => {\n        initWS();\n        subscribeWS(ids);\n      }, 1000);\n    }\n  };\n\n  const closeWS = () => {\n    WSInstance.current?.close();\n  };\n\n  const subscribeWS = (ids: number[]) => {\n    if (!WSInstance.current) return;\n    const WS = WSInstance.current;\n    setWSStatus(WS.readyState);\n    WS.onopen = function () {\n      console.log(\"ws connected!\");\n      setWSStatus(WS.readyState);\n      if (resubscribing.current) {\n        resubscribing.current = false;\n      }\n      const param = {\n        method: \"subscribe\",\n        id: \"price\",\n        data: {\n          cryptoIds: ids,\n        },\n      };\n      WS.send(JSON.stringify(param));\n\n      WS.onmessage = function (res) {\n        onMessage && onMessage(res);\n      };\n      WS.addEventListener(\"close\", (e) => {\n        console.log(\"ws closed!\");\n        setWSStatus(WS.readyState);\n        if (!resubscribing.current) {\n          console.log(\"reconnecting...\");\n          onClose && onClose();\n          setTimeout(() => {\n            initWS();\n            subscribeWS(ids);\n          }, 1000);\n        }\n      });\n    };\n  };\n\n  const reconnect = () => {\n    console.log(\"reconnect!\");\n    closeWS();\n    initWS();\n    subscribeWS(ids);\n  };\n  return [wsStatus, reconnect] as const;\n};\n\nexport default useWbSocket;\n","import axios from \"axios\";\nimport styled from \"styled-components\";\n\nconst instance = axios.create({\n  headers: {\n    Authorization: `Bearer 5fcb77e68787da1467daeea55f0dd01a017efdf3`,\n  },\n});\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  padding: 8px;\n  /* position: absolute; */\n  /* bottom: 0.5em; */\n  width: 100%;\n  font-size: 0.8em;\n  a {\n    &:visited {\n      color: var(--text-color);\n    }\n  }\n  .export {\n    text-decoration: underline;\n  }\n`;\n\nconst Info = () => {\n  const updateShortLink = () => {\n    instance\n      .patch(\"https://api-ssl.bitly.com/v4/bitlinks/bit.ly/3NOtY7t\", {\n        // long_url: window.location.href,\n        // link: \"https://blog.iccfish.com/2021/08/04/unlock-ssh-of-xiaomi-routers/\",\n        long_url: \"https://google.com\",\n      })\n      .then(({ data }) => {\n        navigator.clipboard.writeText(data.link).then(() => {\n          alert(\"Link Copied!\");\n        });\n      });\n  };\n  // const getLink = () => {\n  //   instance.get(\"https://api-ssl.bitly.com/v4/bitlinks/bit.ly/3NCMPSD\");\n  // };\n  return (\n    <Wrapper className={\"info\"}>\n      <span>\n        Data Source:{\" \"}\n        <a href='https://coinmarketcap.com/' target='_blank' rel='noreferrer'>\n          CoinMarketCap\n        </a>\n      </span>\n      &nbsp;&nbsp;&nbsp;\n      <span>\n        <a\n          href='https://github.com/YueminHu/crypto_watch'\n          target='_blank'\n          rel='noreferrer'\n        >\n          Github\n        </a>\n      </span>\n      &nbsp;&nbsp;&nbsp;\n      <span className='export' onClick={updateShortLink}>\n        Update\n      </span>\n      {/* <span className='export' onClick={getLink}>\n        <button>Get</button>\n      </span> */}\n    </Wrapper>\n  );\n};\n\nexport default Info;\n","import { createPortal } from \"react-dom\";\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.8);\n  z-index: 10;\n  display: flex;\n  > div {\n    width: 80vw;\n    max-width: 500px;\n    padding: 24px;\n    background: rgba(255, 255, 255, 0.8);\n    margin: auto;\n    border-radius: 16px;\n  }\n`;\n\nconst Modal: React.FC<{ show: boolean }> = ({ children, show }) => {\n  return show\n    ? createPortal(\n        <Wrapper>\n          <div>{children}</div>\n        </Wrapper>,\n        document.body\n      )\n    : null;\n};\n\nexport default Modal;\n","export const writeURL = (records: Record<string, any>, deletes?: string[]) => {\n  const url = new URL(window.location.href);\n  if (deletes) {\n    deletes.forEach((deleted) => url.searchParams.delete(deleted));\n  }\n  Object.keys(records).forEach((key) => {\n    url.searchParams.set(key, String(records[key]));\n  });\n  window.history.replaceState(\"\", document.title, url);\n};\n\nexport const getSearchParams = (key: string) => {\n  return new URL(window.location.href).searchParams.get(key);\n};\n","import { IconDeviceFloppy, IconLoader } from \"@tabler/icons\";\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Modal from \"./components/modal\";\nimport { APIHost } from \"./components/useUpdateData\";\nimport { getSearchParams, writeURL } from \"./utils/dom\";\n\nconst ModalWrapper = styled.div`\n  input {\n    color: #000;\n  }\n  form > p:last-child {\n    display: flex;\n    justify-content: space-between;\n  }\n`;\n\nconst SaveList: React.FC<{ prices: any }> = ({ prices }) => {\n  // const s = useMutation\n\n  const [modalShow, setModalShow] = useState(false);\n\n  const [name, setName] = useState(\"\");\n  const [secret, setSecret] = useState(\"\");\n\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const defaultName = getSearchParams(\"name\");\n    if (defaultName) {\n      setName(defaultName);\n    }\n  }, []);\n\n  const onClickSave = (e: any) => {\n    e.preventDefault();\n    // console.log(e.target);\n    const form = e.target;\n    const name = form.name.value;\n    const secret = form.secret.value;\n    // const hasIds = new URL(window.location.href).searchParams.get(\"ids\");\n    /**\n     * has id\n     */\n    // console.log(prices);\n    if (!name || !secret) {\n      alert(\"name and secret are required!\");\n    }\n    const data = {\n      name,\n      secret,\n      list: prices.map((price: any) => ({\n        id: price.id,\n        amount: price.amount,\n      })),\n    };\n    setLoading(true);\n    axios\n      .post(`${APIHost}/api/v1/crypto-watch-name`, data)\n      .then((d) => {\n        //   console.log(d.data);\n        if (d.data.status.code === 0) {\n          writeURL({ name: data.name }, [\"ids\"]);\n          setModalShow(false);\n        }\n        alert(\"status: \" + d.data.status.code);\n      })\n      .catch((e) => {\n        alert(e.message);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n  return (\n    <>\n      <button\n        onClick={() => {\n          setModalShow(true);\n        }}\n      >\n        <IconDeviceFloppy></IconDeviceFloppy>Save\n      </button>\n      <Modal show={modalShow}>\n        <ModalWrapper>\n          <form onSubmit={onClickSave}>\n            <p>\n              <input\n                type='text'\n                placeholder='name...'\n                name='name'\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n              />\n            </p>\n            <p>\n              <input\n                type='text'\n                placeholder='secret...'\n                name='secret'\n                value={secret}\n                onChange={(e) => setSecret(e.target.value)}\n              />\n            </p>\n            <p>\n              <button type='submit' disabled={loading}>\n                {loading ? <IconLoader></IconLoader> : \"Save\"}\n              </button>\n              <button onClick={() => setModalShow(false)}>Cancel</button>\n            </p>\n          </form>\n        </ModalWrapper>\n      </Modal>\n    </>\n  );\n};\n\nexport default SaveList;\n","import { useEffect, useState } from \"react\";\n\nimport styled from \"styled-components\";\nimport PriceCell from \"./Cell\";\nimport Status from \"./Footer\";\nimport AddToken from \"./Add\";\nimport { GlobalContextProvider } from \"./context\";\nimport useGetListings from \"./hooks/useGetListings\";\nimport useGetMapStorage from \"./hooks/useGetMapStorage\";\nimport useSubsequentUpdate from \"./hooks/useSubsequentUpdate\";\nimport useWbSocket from \"./hooks/useWebSocket\";\nimport Info from \"./Info\";\nimport eventEmitter from \"./utils/eventEmitter\";\nimport {\n  IconEdit,\n  IconFold,\n  IconSortDescendingNumbers,\n  IconSortDescending,\n} from \"@tabler/icons\";\nimport SaveList from \"./saveList\";\nimport { getSearchParams } from \"./utils/dom\";\nimport axios from \"axios\";\nimport { APIHost } from \"./components/useUpdateData\";\n\nconst ID_SEPARATOR = \"_\";\nconst AMOUNT_SEPARATOR = \"-\";\n\nconst LOCAL_KEY = \"LOCAL_KEY\";\nconst LOCAL_ID_KEY = \"LOCAL_ID_KEY\";\n\nconst Wrapper = styled.div`\n  text-align: left;\n  padding: 0px 8px;\n  /* padding-top: 8px; */\n`;\n\nconst HeadWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: sticky;\n  /* top: 0; */\n  background-image: linear-gradient(\n    to bottom,\n    var(--background-color) 0%,\n    var(--background-color) 70%,\n    transparent 100%\n  );\n  top: -1px;\n  z-index: 10;\n  @media screen and (max-width: 450px) {\n    flex-direction: column;\n    /* overflow: hidden; */\n  }\n  > div:first-child {\n    flex-grow: 1;\n  }\n  > p.buttons {\n    margin: 0px auto 8px;\n    white-space: nowrap;\n    width: 100%;\n    overflow: scroll;\n  }\n`;\n\nconst Guide = styled.div`\n  text-align: center;\n  cursor: pointer;\n  margin: 32px auto;\n  font-weight: bold;\n`;\n\nconst getIds = () => {\n  const url = new URL(window.location.href);\n\n  if (url.searchParams.get(\"name\")) {\n    return [];\n  }\n\n  const idsStored =\n    localStorage.getItem(LOCAL_ID_KEY) || url.searchParams.get(\"ids\") || \"\";\n\n  const hasNewFormat = idsStored.match(/[a-z]/);\n\n  return idsStored\n    ? idsStored.split(ID_SEPARATOR).map((id) => ({\n        id: id.includes(AMOUNT_SEPARATOR)\n          ? parseInt(id.split(AMOUNT_SEPARATOR)[0], hasNewFormat ? 36 : 10)\n          : parseInt(id, hasNewFormat ? 36 : 10) || 1,\n        amount: id.includes(AMOUNT_SEPARATOR)\n          ? Number(id.split(AMOUNT_SEPARATOR)[1])\n          : \"\",\n      }))\n    : [];\n};\n\nexport default function App() {\n  const [edit, setEdit] = useState(false);\n\n  const [prices, setPrices] = useState<\n    {\n      id: number;\n      price?: number;\n      p24h?: number;\n      slug?: string;\n      name?: string;\n      amount?: number | string;\n    }[]\n  >(getIds);\n\n  // console.log(prices)\n\n  const [expandStatus, setExpandStatus] = useState({});\n\n  const idsArray = prices.map(({ id }) => id);\n  const amountsArray = prices.map(({ amount }) => amount);\n\n  const cryptoListData = useGetMapStorage(LOCAL_KEY);\n\n  const [refetchAPI, lastRefetch] = useGetListings(idsArray, setPrices);\n\n  const [wsStatus, reconnect] = useWbSocket({\n    ids: idsArray,\n    onClose: () => refetchAPI(),\n    onMessage: (res: any) => {\n      const data = JSON.parse(res.data);\n      if (data?.d?.cr) {\n        const info = data.d.cr;\n        // console.log(info);\n        eventEmitter.emit(`WS-${info.id}`, info);\n        setPrices((prices) => {\n          return prices.map((p) => {\n            if (p.id === info.id) {\n              return {\n                ...info,\n                ...p,\n                price: info.p,\n                p24h: info.p24h,\n              };\n            }\n            return p;\n          });\n        });\n      } else {\n        console.log(data);\n      }\n    },\n  });\n\n  const handleAddOrRemove = (id: number, add?: boolean) => {\n    if (idsArray.includes(id) && add) {\n      return;\n    }\n    setPrices((prices) => {\n      const newPrices = add\n        ? [\n            ...prices,\n            {\n              id: id,\n            },\n          ]\n        : prices.filter((price) => price.id !== id);\n      return newPrices;\n    });\n    setExpandStatus({\n      ...expandStatus,\n      [id]: true,\n    });\n  };\n\n  // const handleCollapse = (expand?: boolean) => {\n  //   if (!expand) {\n  //     setExpandStatus({});\n  //   }\n  // };\n\n  useEffect(() => {\n    const name = getSearchParams(\"name\");\n    if (name) {\n      axios\n        .get(`${APIHost}/api/v1/crypto-watch-name?name=${name}`)\n        .then((d) => {\n          if (d.data.data) {\n            setPrices(d.data.data);\n          }\n        });\n    }\n  }, []);\n\n  /**\n   * rewrite URL when id length / order changes\n   */\n  useSubsequentUpdate(() => {\n    // console.log(ids);\n    // console.log(amounts);\n    // console.log(ids, amounts);\n    const idsString = idsArray\n      .map((id, idx) => {\n        return (\n          id.toString(36) +\n          (amountsArray[idx] ? `${AMOUNT_SEPARATOR}${amountsArray[idx]}` : \"\")\n        );\n      })\n      .join(ID_SEPARATOR);\n    // writeURL(idsString);\n    localStorage.setItem(LOCAL_ID_KEY, idsString);\n  }, idsArray.join() + amountsArray.join());\n\n  return (\n    <GlobalContextProvider>\n      <div className='App'>\n        <HeadWrapper>\n          <AddToken\n            onAdd={(id: number) => handleAddOrRemove(id, true)}\n            mapData={cryptoListData}\n          />\n          <p className='buttons'>\n            <button\n              onClick={() => {\n                const newPrices = [...prices];\n                newPrices.sort((a, b) =>\n                  a.amount &&\n                  a.price &&\n                  b.price &&\n                  b.amount &&\n                  typeof a.amount === \"number\" &&\n                  typeof b.amount === \"number\"\n                    ? b.amount * b.price - a.amount * a.price\n                    : -Infinity\n                );\n                setPrices(newPrices);\n              }}\n            >\n              <IconSortDescendingNumbers></IconSortDescendingNumbers>\n              Sort Value\n            </button>\n            &nbsp;\n            <button\n              onClick={() => {\n                const newPrices = [...prices];\n                newPrices.sort((a, b) =>\n                  a.p24h && b.p24h ? b.p24h - a.p24h : Infinity\n                );\n                setPrices(newPrices);\n              }}\n            >\n              <IconSortDescending></IconSortDescending>\n              Sort Change\n            </button>\n            &nbsp;\n            <button onClick={() => setExpandStatus({})}>\n              <IconFold></IconFold>\n              Fold All\n            </button>\n            &nbsp;\n            <button onClick={() => setEdit(!edit)}>\n              <IconEdit></IconEdit>\n              {edit ? \"Done\" : \"Edit\"}\n            </button>\n            &nbsp;\n            <SaveList prices={prices}></SaveList>\n          </p>\n        </HeadWrapper>\n        <Wrapper>\n          {prices.length ? (\n            prices.map((info: any, idx) => (\n              <PriceCell\n                name={cryptoListData[info.id]?.symbol}\n                key={info.id}\n                info={info}\n                onRemove={(id: number) => handleAddOrRemove(id)}\n                prices={prices}\n                setPrices={setPrices}\n                idx={idx}\n                expandStatus={expandStatus}\n                setExpandStatus={setExpandStatus}\n                edit={edit}\n              />\n            ))\n          ) : (\n            <Guide\n              onClick={() => {\n                document\n                  .querySelector<HTMLInputElement>(\"input.crypto-search\")\n                  ?.focus();\n              }}\n            >\n              Click me to add\n            </Guide>\n          )}\n        </Wrapper>\n        {prices.some((price) => !!price.amount) && (\n          <p>\n            Total Amount: $\n            <b>\n              {prices\n                .reduce((prev, next) => {\n                  return next.amount &&\n                    next.price &&\n                    typeof next.amount == \"number\"\n                    ? prev + next.amount * next.price\n                    : prev;\n                }, 0)\n                .toFixed(2)}\n            </b>\n          </p>\n        )}\n        <Info />\n\n        {idsArray.length ? (\n          <Status\n            wsStatus={wsStatus}\n            // wsInstance={WSInstance}\n            reconnect={reconnect}\n            lastRefetch={lastRefetch}\n          />\n        ) : null}\n      </div>\n    </GlobalContextProvider>\n  );\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}